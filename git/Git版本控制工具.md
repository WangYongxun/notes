## Git版本控制工具

[toc]

### 1. 简单说明

#### 1.1 Git 的四个工作区：

![四个工作区](https://images2017.cnblogs.com/blog/63651/201709/63651-20170905201033647-1915833066.png)

**从左到右：**

+ 工作目录（Working Directory）
  + 指具体的工作目录
+ 暂存区(Stage/Index)
  + add后的文件目录
  + 如果不实时add，暂存区会比工作区少新增的文件
+ 本地仓库(Repository或Git Directory)
  + commit后的文件目录
  + 将暂存区的目录更新到仓库
+ 远程仓库(Remote Directory)
  + push后的远程目录

**有关仓库的常用命令：**

![常用命令](https://images2017.cnblogs.com/blog/63651/201709/63651-20170905212837976-775285128.png)

#### 1.2 Git的四种文件状态:

+ **Untracked**:   **未跟踪,**
  + 此文件在文件夹中, 但并没有加入到git库, 不参与版本控制. 通过git add 状态变为Staged.
+ **Unmodify**:   文件已经入库, **未修改**
  + 即版本库中的文件快照内容与文件夹中完全一致. 这种类型的文件有两种去处, 如果它被修改, 而变为Modified，果使用git rm移出版本库, 则成为Untracked文件
+ **Modified**: 文件**已修改**
  + 仅仅是修改, 并没有进行其他的操作. 这个文件也有两个去处, 通过git add可进入暂存staged状态, 使用git checkout 则丢弃修改过,返回到unmodify状态, 这个git checkout即从库中取出文件, 覆盖当前修改
+ **Staged**: **暂存状态**
  + 执行git commit则将修改同步到库中, 这时库中的文件和本地文件又变为一致, 文件为Unmodify状态. 执行git reset HEAD filename取消暂存,文件状态为Modified

**详细图解：**
![详细图解](https://images2017.cnblogs.com/blog/63651/201709/63651-20170909091456335-1787774607.jpg)

#### 1.3 本文代码段说明：

```
<> 表示必要
[] 表示可选
&  表示或者
```

#### 1.4 常见术语：

1. **仓库（Repository）**
   受版本控制的所有文件修订历史的共享数据库

2. **工作空间（Workspace)**
   本地硬盘或Unix 用户帐户上编辑的文件副本

3. **工作树/区（Working tree）**
   工作区中包含了仓库的工作文件。您可以修改的内容和提交更改作为新的提交到仓库。

4. **暂存区（Staging area）**
   暂存区是工作区用来提交更改（commit）前可以暂存工作区的变化。

5. **索引（Index）**
   索引是暂存区的另一种术语。

6. **签入（Checkin）**
   将新版本复制回仓库

7. **签出（Checkout）**
   从仓库中将文件的最新修订版本复制到工作空间

8. **提交（Commit）**
   对各自文件的工作副本做了更改，并将这些更改提交到仓库

9. **冲突（Conflict）**
   多人对同一文件的工作副本进行更改，并将这些更改提交到仓库

10. **合并（Merge）**
    将某分支上的更改联接到此主干或同为主干的另一个分支

11. **分支（Branch）**
    从主线上分离开的副本，默认分支叫master

12. **锁（Lock）**
    获得修改文件的专有权限。

13. **头（HEAD）**
    头是一个象征性的参考，最常用以指向当前选择的分支。

14. **修订（Revision）**
    表示代码的一个版本状态。Git通过用SHA1 hash算法表示的ID来标识不同的版本。

15. **标记（Tags）**
    标记指的是某个分支某个特定时间点的状态。通过标记，可以很方便的切换到标记时的状态。

---

### 2 相关命令

#### 2.1 初始化：

+ `git init [仓库名]` 

+ 在任意目录创建git本地仓库，执行后出现.git目录
  
  #### 2.2 从远程克隆仓库到本地：

+ `git clone <仓库&目录> [重新设置的仓库名]` 

+ 执行后会在当前目录下创建一个名为grit的目录，其中包含一个 .git 的目录，用于保存下载下来的所有版本记录 。
  
  #### 2.3 将工作区的修改更新到暂存区：

+ `git add <文件名&正则&目录>` 

+ 将更新（增删改）后的文件/目录添加到仓库，空格隔开可同时添加多个文件
  
  #### 2.4 查看本地仓库文件状态：

+ `git status [指定文件名]` 

+ 执行后的状态参考“Git的四种文件状态”
  
  #### 2.5 查看修改的内容：

+ `git diff [可指定文件名]` 

+ 执行后显示每个文件具体到某行的修改情况
  
  #### 2.6 提交修改到本地仓库：

+ `git commit [-m '本次提交说明']` 

+ 将**全部**改动提交到仓库，建议每次都写准确message

+ 所有对git仓库文件的改动都需要commit后才真正加入到版本中
  
  #### 2.7 查看版本日志：

+ `git log ` 
  
  #### 2.8 使版本重置到过去/未来：

+ `git reset --hard <HEAD分支名&版本号>`

+ 可以使用`git reflog`查看分支后再重置

+ HEAD^ 表示重置到上一个版本，HEAD^^表示上上个版本，HEAD~n表示上n个版本

#### 2.9 使版本回到未来：

...

> 参考：[一小时学会Git](https://www.cnblogs.com/best/p/7474442.html) 真的非常全面